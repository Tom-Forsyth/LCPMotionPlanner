\hypertarget{_dual_quaternion_8cpp_source}{}\doxysection{Dual\+Quaternion.\+cpp}
\label{_dual_quaternion_8cpp_source}\index{src/DualQuaternion.cpp@{src/DualQuaternion.cpp}}
\mbox{\hyperlink{_dual_quaternion_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_dual_quaternion_8h}{DualQuaternion.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_dual_number_8h}{DualNumber.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <Eigen/Dense>}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00006}00006 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_motion_planner}{MotionPlanner}}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00008}00008     \textcolor{comment}{// Default constructor.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00009}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{00009}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion::DualQuaternion}}()}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00010}00010         : m\_real(Eigen::Quaterniond(1, 0, 0, 0)), m\_dual(Eigen::Quaterniond(1, 0, 0, 0)) \{ \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00012}00012     \textcolor{comment}{// From quaternions constructor.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00013}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a3bcfd83d9c46560e5c99b513417d0f16}{00013}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion::DualQuaternion}}(\textcolor{keyword}{const} Eigen::Quaterniond\& real, \textcolor{keyword}{const} Eigen::Quaterniond\& dual)}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00014}00014         : m\_real(real), m\_dual(dual) \{ \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00016}00016     \textcolor{comment}{// From transform constructor.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00017}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a07bf1e2645c0041d2aef6520039a4ff3}{00017}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion::DualQuaternion}}(\textcolor{keyword}{const} Eigen::Matrix4d\& transform)}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00018}00018     \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00019}00019         Eigen::Matrix3d R = transform.block(0, 0, 3, 3);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00020}00020         Eigen::Quaterniond realVec(R);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00021}00021         Eigen::Vector4d pReverse = transform.block(0, 3, 4, 1);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00022}00022         pReverse(3) = 0;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00023}00023         pReverse = 0.5 * pReverse;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00024}00024         Eigen::Quaterniond realQuat(pReverse);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00025}00025         \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}} = realVec;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00026}00026         \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} = Eigen::Quaterniond(realQuat * realVec);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00027}00027     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00029}00029     \textcolor{comment}{// Addition.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00030}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a29a89fa391c65ed4a2d772e82d4c543c}{00030}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a29a89fa391c65ed4a2d772e82d4c543c}{DualQuaternion::operator+}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}}\& dualQuaternion)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00031}00031 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00032}00032         Eigen::Vector4d realVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs() + dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00033}00033         Eigen::Vector4d dualVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.coeffs() + dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00034}00034         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion}}(Eigen::Quaterniond(realVec), Eigen::Quaterniond(dualVec));}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00035}00035     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00037}00037     \textcolor{comment}{// Subtraction.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00038}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a93cf5cb163ab3f036ffad6a2513ee41d}{00038}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a93cf5cb163ab3f036ffad6a2513ee41d}{DualQuaternion::operator-\/}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}}\& dualQuaternion)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00039}00039 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00040}00040         Eigen::Vector4d realVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs() -\/ dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00041}00041         Eigen::Vector4d dualVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.coeffs() -\/ dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00042}00042         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion}}(Eigen::Quaterniond(realVec), Eigen::Quaterniond(dualVec));}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00043}00043     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00045}00045     \textcolor{comment}{// Multiplication.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00046}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_ade3a55293ce1233f61fd6fe361034690}{00046}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_ade3a55293ce1233f61fd6fe361034690}{DualQuaternion::operator*}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}}\& dualQuaternion)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00047}00047 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00048}00048         Eigen::Quaterniond realQuat = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}} * dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00049}00049         Eigen::Quaterniond q1 = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} * dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00050}00050         Eigen::Quaterniond q2 = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}} * dualQuaternion.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00051}00051         Eigen::Quaterniond dualQuat = Eigen::Quaterniond(q1.coeffs() + q2.coeffs());}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00052}00052         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion}}(realQuat, dualQuat);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00053}00053     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00055}00055     \textcolor{comment}{// Conjugate.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00056}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aa9af3b5df2a7fe6f7575f388d9c14b34}{00056}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aa9af3b5df2a7fe6f7575f388d9c14b34}{DualQuaternion::conjugate}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00057}00057 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00058}00058         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion}}(\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.conjugate(), \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.conjugate());}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00059}00059     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00061}00061     \textcolor{comment}{// Magnitude.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00062}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{00062}}     \textcolor{keywordtype}{double} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{DualQuaternion::norm}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00063}00063 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00064}00064         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.norm();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00065}00065     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00067}00067     \textcolor{comment}{// Normalize.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00068}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_ab6bfbf74e442b9eea9b7ac14fd0eb1d6}{00068}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_ab6bfbf74e442b9eea9b7ac14fd0eb1d6}{DualQuaternion::normalize}}()}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00069}00069     \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00070}00070         \textcolor{keywordtype}{double} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{norm}} = this-\/>\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{norm}}();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00071}00071         Eigen::Vector4d realVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs() / \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{norm}};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00072}00072         Eigen::Vector4d dualVec = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}}.coeffs() / \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2f8657f8f00f4195976a32132cafbd3a}{norm}};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00073}00073         \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}} = Eigen::Quaterniond(realVec);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00074}00074         \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} = Eigen::Quaterniond(dualVec);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00075}00075     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00077}00077     \textcolor{comment}{// Power.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00078}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a7c7204690164403f741bc13989c692a4}{00078}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a7c7204690164403f741bc13989c692a4}{DualQuaternion::pow}}(\textcolor{keyword}{const} \textcolor{keywordtype}{double}\& exponent)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00079}00079 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00080}00080         \textcolor{comment}{// Get axis and angle from the real portion of the dual quaternion.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00081}00081         Eigen::AngleAxis<double> axisAngle(\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}});}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00082}00082         Eigen::Vector3d axis = axisAngle.axis();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00083}00083         \textcolor{keywordtype}{double} angle = axisAngle.angle();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00085}00085         \textcolor{comment}{// Get the translation vector from the dual portion of the dual quaternion.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00086}00086         Eigen::Vector4d transVecHomo = 2 * (\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} * \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.conjugate()).coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00087}00087         Eigen::Vector3d transVec = transVecHomo.head(3);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00089}00089         \textcolor{comment}{// Compute the ttranslation along the screw axis by projecting the displacement vector, and the moment vector.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00090}00090         \textcolor{keywordtype}{double} displacement = 0;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00091}00091         Eigen::Vector3d moment = Eigen::Vector3d::Zero();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00092}00092         \textcolor{keywordflow}{if} (angle < 1e-\/10) \textcolor{comment}{// Should this be mod pi?}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00093}00093         \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00094}00094             axis = transVec.normalized(); \textcolor{comment}{// Axis has no meaning at singularities so we choose this.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00095}00095             displacement = transVec.dot(axis);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00096}00096         \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00097}00097         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00098}00098         \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00099}00099             displacement = transVec.dot(axis);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00100}00100             moment = 0.5 * ((transVec.cross(axis)) + (transVec -\/ displacement * axis) * (1 / tan(angle / 2)));}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00101}00101         \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00103}00103         \textcolor{comment}{// Construct new dual quaternion.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00104}00104         \textcolor{keywordtype}{double} const1 = exponent * angle / 2;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00105}00105         \textcolor{keywordtype}{double} const2 = exponent * displacement / 2;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00106}00106         \mbox{\hyperlink{class_motion_planner_1_1_dual_number}{DualNumber}} dualNum1\{ cos(const1), -\/const2 * sin(const1) \};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00107}00107         \mbox{\hyperlink{class_motion_planner_1_1_dual_number}{DualNumber}} dualNum2\{ sin(const1), const2 * cos(const1) \};}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00109}00109         std::vector<DualNumber> dualVec;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00110}00110         dualVec.reserve(3);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00111}00111         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < 3; i++) \{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00112}00112             \mbox{\hyperlink{class_motion_planner_1_1_dual_number}{DualNumber}} dualNum3(axis(i), moment(i));}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00113}00113             dualVec.emplace\_back(dualNum3 * dualNum2);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00114}00114         \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00115}00115 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00116}00116         Eigen::Quaterniond realQuat(dualNum1.m\_real, dualVec[0].m\_real, dualVec[1].m\_real, dualVec[2].m\_real);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00117}00117         Eigen::Quaterniond dualQuat(dualNum1.m\_dual, dualVec[0].m\_dual, dualVec[1].m\_dual, dualVec[2].m\_dual);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00118}00118         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a595fe97cf68e81a573313a3d063f95fc}{DualQuaternion}}(realQuat, dualQuat);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00119}00119     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00121}00121     \textcolor{comment}{// Screw linear interpolation.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00122}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a692107a6835968fb192faa6f09d82657}{00122}}     \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a692107a6835968fb192faa6f09d82657}{DualQuaternion::ScLERP}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}}\& dualQuaternionEnd, \textcolor{keyword}{const} \textcolor{keywordtype}{double}\& tau)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00123}00123 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00124}00124         \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion}{DualQuaternion}} dualQuatInterp = this-\/>\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aa9af3b5df2a7fe6f7575f388d9c14b34}{conjugate}}() * dualQuaternionEnd;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00125}00125         \textcolor{keywordflow}{return} *\textcolor{keyword}{this} * dualQuatInterp.\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a7c7204690164403f741bc13989c692a4}{pow}}(tau);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00126}00126     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00128}00128     \textcolor{comment}{// Convert to transformation matrix.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00129}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a40ca385f3959e314505f4363ed2a76ea}{00129}}     Eigen::Matrix4d \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a40ca385f3959e314505f4363ed2a76ea}{DualQuaternion::toTransformationMatrix}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00130}00130 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00131}00131         Eigen::Matrix3d R = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.toRotationMatrix();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00132}00132         Eigen::Vector4d p = 2 * (\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} * \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.conjugate()).coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00133}00133         Eigen::Matrix4d transformation = Eigen::Matrix4d::Zero();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00134}00134         transformation.block(0, 0, 3, 3) = R;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00135}00135         transformation.block(0, 3, 4, 1) = p;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00136}00136         transformation(3, 3) = 1;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00137}00137         \textcolor{keywordflow}{return} transformation;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00138}00138     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00140}00140     \textcolor{comment}{// Convert to position \& orientation quaternion concatination representation.}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00141}\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a3c17e73dd15a659de74675bc663852f4}{00141}}     Eigen::Vector<double, 7> \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a3c17e73dd15a659de74675bc663852f4}{DualQuaternion::toConcat}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00142}00142 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00143}00143         Eigen::Vector4d p4 = 2 * (\mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_aebc4b13b8fff18508411ff34d04ad723}{m\_dual}} * \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.conjugate()).coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00144}00144         Eigen::Vector3d p = p4.head(3);}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00145}00145         Eigen::Vector4d vecQ = \mbox{\hyperlink{class_motion_planner_1_1_dual_quaternion_a2e88fbe3086eb05b0808cc3cccd2debc}{m\_real}}.coeffs();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00146}00146         Eigen::Vector4d Q(vecQ(3), vecQ(0), vecQ(1), vecQ(2));}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00147}00147         Eigen::Vector<double, 7> gamma = Eigen::Vector<double, 7>::Zero();}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00148}00148         gamma.segment(0, 3) = p;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00149}00149         gamma.segment(3, 4) = Q;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00150}00150         \textcolor{keywordflow}{return} gamma;}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00151}00151     \}}
\DoxyCodeLine{\Hypertarget{_dual_quaternion_8cpp_source_l00152}00152 \}}

\end{DoxyCode}
